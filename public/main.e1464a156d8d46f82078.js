/*! For license information please see main.e1464a156d8d46f82078.js.LICENSE.txt */
(()=>{"use strict";var t={2154(){function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}function n(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var a,i,r,s,o=[],c=!0,l=!1;try{if(r=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;c=!1}else for(;!(c=(a=r.call(e)).done)&&(o.push(a.value),o.length!==n);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=e.return&&(s=e.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(t,n)||e(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,n){if(t){if("string"==typeof t)return a(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,n):void 0}}function a(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=Array(n);e<n;e++)a[e]=t[e];return a}function i(){var t,n,e="function"==typeof Symbol?Symbol:{},a=e.iterator||"@@iterator",s=e.toStringTag||"@@toStringTag";function o(e,a,i,s){var o=a&&a.prototype instanceof l?a:l,d=Object.create(o.prototype);return r(d,"_invoke",function(e,a,i){var r,s,o,l=0,d=i||[],u=!1,v={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(n,e){return r=n,s=0,o=t,v.n=e,c}};function h(e,a){for(s=e,o=a,n=0;!u&&l&&!i&&n<d.length;n++){var i,r=d[n],h=v.p,p=r[2];e>3?(i=p===a)&&(o=r[(s=r[4])?5:(s=3,3)],r[4]=r[5]=t):r[0]<=h&&((i=e<2&&h<r[1])?(s=0,v.v=a,v.n=r[1]):h<p&&(i=e<3||r[0]>a||a>p)&&(r[4]=e,r[5]=a,v.n=p,s=0))}if(i||e>1)return c;throw u=!0,a}return function(i,d,p){if(l>1)throw TypeError("Generator is already running");for(u&&1===d&&h(d,p),s=d,o=p;(n=s<2?t:o)||!u;){r||(s?s<3?(s>1&&(v.n=-1),h(s,o)):v.n=o:v.v=o);try{if(l=2,r){if(s||(i="next"),n=r[i]){if(!(n=n.call(r,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,s<2&&(s=0)}else 1===s&&(n=r.return)&&n.call(r),s<2&&(o=TypeError("The iterator does not provide a '"+i+"' method"),s=1);r=t}else if((n=(u=v.n<0)?o:e.call(a,v))!==c)break}catch(n){r=t,s=1,o=n}finally{l=1}}return{value:n,done:u}}}(e,i,s),!0),d}var c={};function l(){}function d(){}function u(){}n=Object.getPrototypeOf;var v=[][a]?n(n([][a]())):(r(n={},a,function(){return this}),n),h=u.prototype=l.prototype=Object.create(v);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,r(t,s,"GeneratorFunction")),t.prototype=Object.create(h),t}return d.prototype=u,r(h,"constructor",u),r(u,"constructor",d),d.displayName="GeneratorFunction",r(u,s,"GeneratorFunction"),r(h),r(h,s,"Generator"),r(h,a,function(){return this}),r(h,"toString",function(){return"[object Generator]"}),(i=function(){return{w:o,m:p}})()}function r(t,n,e,a){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}r=function(t,n,e,a){function s(n,e){r(t,n,function(t){return this._invoke(n,e,t)})}n?i?i(t,n,{value:e,enumerable:!a,configurable:!a,writable:!a}):t[n]=e:(s("next",0),s("throw",1),s("return",2))},r(t,n,e,a)}function s(t,n,e,a,i,r,s){try{var o=t[r](s),c=o.value}catch(t){return void e(t)}o.done?n(c):Promise.resolve(c).then(a,i)}function o(t){return function(){var n=this,e=arguments;return new Promise(function(a,i){var r=t.apply(n,e);function o(t){s(r,a,i,o,c,"next",t)}function c(t){s(r,a,i,o,c,"throw",t)}o(void 0)})}}function c(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,l(a.key),a)}}function l(n){var e=function(n){if("object"!=t(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var a=e.call(n,"string");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==t(e)?e:e+""}var d="/plugins/signalk-edge-link",u=function(t,n,e){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return'\n  <div class="config-section">\n    <div class="card">\n      <div class="card-header">\n        <h2>'.concat(t,"</h2>\n        ").concat(n?'<p class="subtitle">'.concat(n,"</p>"):"",'\n      </div>\n      <div class="card-content">\n        <div id="').concat(e,'" class="').concat(a||e+"-info",'">\n          <p>Loading ').concat(t.toLowerCase(),"...</p>\n        </div>\n      </div>\n    </div>\n  </div>\n")},v=function(t,n){return'\n  <div class="stat-item'.concat(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?" error":"",'">\n    <span class="stat-label">').concat(t,':</span>\n    <span class="stat-value">').concat(n,"</span>\n  </div>\n")},h=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return'\n  <div class="metric-item'.concat(e?" "+e:"",'">\n    <div class="metric-label">').concat(t,'</div>\n    <div class="metric-value">').concat(n,"</div>\n  </div>\n")},p=function(t,n){var e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return'\n  <div class="bw-stat'.concat(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?" highlight":"",'">\n    <span class="bw-label">').concat(t,':</span>\n    <span class="bw-value').concat(e?" success-text":"",'">').concat(n,"</span>\n  </div>\n")},m=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.deltaTimerConfig=null,this.subscriptionConfig=null,this.sentenceFilterConfig=null,this.isServerMode=!1,this.protocolVersion=1,this.metricsInterval=null,this.syncTimeout=null,this.init()},r=[{key:"init",value:(S=o(i().m(function t(){var n;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.checkServerMode();case 1:if(!this.isServerMode){t.n=2;break}this.showServerModeUI(),t.n=4;break;case 2:return t.n=3,this.loadConfigurations();case 3:this.setupEventListeners(),this.updateUI(),this.updateStatus();case 4:return t.n=5,this.loadMetrics();case 5:this.startMetricsRefresh(),t.n=7;break;case 6:t.p=6,n=t.v,console.error("Initialization error:",n),this.showNotification("Failed to initialize application: "+n.message,"error");case 7:return t.a(2)}},t,this,[[0,6]])})),function(){return S.apply(this,arguments)})},{key:"checkServerMode",value:(w=o(i().m(function t(){var n;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("".concat(d,"/config/delta_timer.json"));case 1:n=t.v,this.isServerMode=!n.ok&&(404===n.status||405===n.status),t.n=3;break;case 2:t.p=2,t.v,this.isServerMode=!0;case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return w.apply(this,arguments)})},{key:"loadConfigurations",value:(k=o(i().m(function t(){var e,a,r,s,o,c;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,Promise.all([fetch("".concat(d,"/config/delta_timer.json")),fetch("".concat(d,"/config/subscription.json")),fetch("".concat(d,"/config/sentence_filter.json"))]);case 1:if(e=t.v,a=n(e,3),r=a[0],s=a[1],o=a[2],!r.ok){t.n=3;break}return t.n=2,r.json();case 2:this.deltaTimerConfig=t.v;case 3:if(!s.ok){t.n=5;break}return t.n=4,s.json();case 4:this.subscriptionConfig=t.v;case 5:if(!o.ok){t.n=7;break}return t.n=6,o.json();case 6:this.sentenceFilterConfig=t.v;case 7:t.n=9;break;case 8:t.p=8,c=t.v,this.showNotification("Error loading configurations: "+c.message,"error");case 9:return t.a(2)}},t,this,[[0,8]])})),function(){return k.apply(this,arguments)})},{key:"setupEventListeners",value:function(){var t=this;document.getElementById("saveDeltaTimer").addEventListener("click",function(){t.saveDeltaTimer()}),document.getElementById("saveSubscription").addEventListener("click",function(){t.saveSubscription()}),document.getElementById("saveSentenceFilter").addEventListener("click",function(){t.saveSentenceFilter()}),document.getElementById("addPath").addEventListener("click",function(){t.addPathItem()}),document.getElementById("subscriptionJson").addEventListener("input",function(){t.syncTimeout&&clearTimeout(t.syncTimeout),t.syncTimeout=setTimeout(function(){t.syncFromJson()},300)}),document.getElementById("context").addEventListener("input",function(){t.updateJsonFromForm()})}},{key:"updateUI",value:function(){var t=this;this.deltaTimerConfig&&this.deltaTimerConfig.deltaTimer&&(document.getElementById("deltaTimer").value=this.deltaTimerConfig.deltaTimer),this.subscriptionConfig&&(document.getElementById("context").value=this.subscriptionConfig.context||"*",document.getElementById("pathsList").innerHTML="",this.subscriptionConfig.subscribe&&Array.isArray(this.subscriptionConfig.subscribe)&&this.subscriptionConfig.subscribe.forEach(function(n){t.addPathItem(n.path)}),document.getElementById("subscriptionJson").value=JSON.stringify(this.subscriptionConfig,null,2)),this.sentenceFilterConfig&&Array.isArray(this.sentenceFilterConfig.excludedSentences)&&(document.getElementById("sentenceFilter").value=this.sentenceFilterConfig.excludedSentences.join(", "))}},{key:"addPathItem",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=document.getElementById("pathsList"),a=document.createElement("div");a.className="path-item";var i=document.createElement("input");i.type="text",i.value=n,i.placeholder="navigation.position",i.className="path-input";var r=document.createElement("button");r.type="button",r.className="btn btn-danger",r.textContent="Remove",i.addEventListener("input",function(){t.updateJsonFromForm()}),r.addEventListener("click",function(){a.remove(),t.updateJsonFromForm()}),a.appendChild(i),a.appendChild(r),e.appendChild(a),this.updateJsonFromForm()}},{key:"updateJsonFromForm",value:function(){var t=document.getElementById("context").value||"*",n=document.querySelectorAll(".path-input"),e={context:t,subscribe:Array.from(n).map(function(t){return{path:t.value}}).filter(function(t){return""!==t.path.trim()})};document.getElementById("subscriptionJson").value=JSON.stringify(e,null,2)}},{key:"syncFromJson",value:function(){var t=this;try{var n=document.getElementById("subscriptionJson").value,e=JSON.parse(n);document.getElementById("context").value=e.context||"*",document.getElementById("pathsList").innerHTML="",e.subscribe&&Array.isArray(e.subscribe)&&e.subscribe.forEach(function(n){t.addPathItem(n.path||"")})}catch(t){console.warn("Invalid JSON in editor:",t.message)}}},{key:"saveConfig",value:(b=o(i().m(function t(n,e,a,r){var s;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("".concat(d,"/config/").concat(n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 1:if(!t.v.ok){t.n=2;break}this[a]=e,this.showNotification("".concat(r," saved successfully!"),"success"),this.updateStatus(),t.n=3;break;case 2:throw new Error("Failed to save configuration");case 3:t.n=5;break;case 4:t.p=4,s=t.v,this.showNotification("Error saving ".concat(r.toLowerCase(),": ")+s.message,"error");case 5:return t.a(2)}},t,this,[[0,4]])})),function(t,n,e,a){return b.apply(this,arguments)})},{key:"saveDeltaTimer",value:(y=o(i().m(function t(){var n;return i().w(function(t){for(;;)switch(t.n){case 0:if(n=parseInt(document.getElementById("deltaTimer").value),!(isNaN(n)||n<100||n>1e4)){t.n=1;break}return this.showNotification("Delta timer must be between ".concat(100," and ").concat(1e4," milliseconds"),"error"),t.a(2);case 1:return t.n=2,this.saveConfig("delta_timer.json",{deltaTimer:n},"deltaTimerConfig","Delta timer configuration");case 2:return t.a(2)}},t,this)})),function(){return y.apply(this,arguments)})},{key:"saveSubscription",value:(g=o(i().m(function t(){var n,e,a;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,n=document.getElementById("subscriptionJson").value,(e=JSON.parse(n)).context){t.n=1;break}throw new Error("Context is required");case 1:if(e.subscribe&&Array.isArray(e.subscribe)){t.n=2;break}throw new Error("Subscribe array is required");case 2:return t.n=3,this.saveConfig("subscription.json",e,"subscriptionConfig","Subscription configuration");case 3:t.n=5;break;case 4:t.p=4,a=t.v,this.showNotification("Error saving subscription: "+a.message,"error");case 5:return t.a(2)}},t,this,[[0,4]])})),function(){return g.apply(this,arguments)})},{key:"saveSentenceFilter",value:(f=o(i().m(function t(){var n,e;return i().w(function(t){for(;;)switch(t.n){case 0:return n=document.getElementById("sentenceFilter").value,e=n.split(",").map(function(t){return t.trim().toUpperCase()}).filter(function(t){return t.length>0}),t.n=1,this.saveConfig("sentence_filter.json",{excludedSentences:e},"sentenceFilterConfig","Sentence filter");case 1:return t.a(2)}},t,this)})),function(){return f.apply(this,arguments)})},{key:"loadMetrics",value:(m=o(i().m(function t(){var n,e,a;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("".concat(d,"/metrics"));case 1:if(!(n=t.v).ok){t.n=3;break}return t.n=2,n.json();case 2:e=t.v,this.protocolVersion=e.protocolVersion||1,this.updateMetricsDisplay(e),2===this.protocolVersion&&this.loadV2Data();case 3:t.n=5;break;case 4:t.p=4,a=t.v,console.error("Error loading metrics:",a.message);case 5:return t.a(2)}},t,this,[[0,4]])})),function(){return m.apply(this,arguments)})},{key:"loadV2Data",value:(l=o(i().m(function t(){var e,a,r,s,o,c,l,u,v,h,p,m;return i().w(function(t){for(;;)switch(t.n){case 0:return e=!this.isServerMode,a=[fetch("".concat(d,"/monitoring/alerts")).catch(function(){return null}),fetch("".concat(d,"/monitoring/packet-loss")).catch(function(){return null}),fetch("".concat(d,"/monitoring/retransmissions")).catch(function(){return null})],e&&a.push(fetch("".concat(d,"/congestion")).catch(function(){return null}),fetch("".concat(d,"/bonding")).catch(function(){return null})),t.n=1,Promise.all(a);case 1:if(r=t.v,s=n(r,5),o=s[0],c=s[1],l=s[2],u=s[3],v=s[4],h={},!o||!o.ok){t.n=3;break}return t.n=2,o.json();case 2:h.alerts=t.v;case 3:if(!c||!c.ok){t.n=5;break}return t.n=4,c.json();case 4:h.packetLoss=t.v;case 5:if(!l||!l.ok){t.n=7;break}return t.n=6,l.json();case 6:h.retransmissions=t.v;case 7:if(this.updateMonitoringDisplay(h),!(e&&u&&u.ok)){t.n=9;break}return t.n=8,u.json();case 8:p=t.v,this.updateCongestionDisplay(p);case 9:if(!(e&&v&&v.ok)){t.n=11;break}return t.n=10,v.json();case 10:m=t.v,this.updateBondingDisplay(m);case 11:return t.a(2)}},t,this)})),function(){return l.apply(this,arguments)})},{key:"startMetricsRefresh",value:function(){var t=this;this.metricsInterval&&clearInterval(this.metricsInterval),this.metricsInterval=setInterval(function(){t.loadMetrics()},15e3)}},{key:"updateMetricsDisplay",value:function(t){this.updateNetworkQualityDisplay(t),this.updateBandwidthDisplay(t),this.updatePathAnalyticsDisplay(t);var n=document.getElementById("metrics");if(n){var e="client"===t.mode,a=t.stats,i=t.status,r=t.uptime,s=a.udpSendErrors>0||a.compressionErrors>0||a.encryptionErrors>0||a.subscriptionErrors>0,o=2===(t.protocolVersion||1)?"v2":"v1",c=[h("Uptime",r.formatted),h("Mode",e?"üì± Client":"üñ•Ô∏è Server"),h("Protocol",'<span class="protocol-badge protocol-'.concat(o,'">').concat(o.toUpperCase(),"</span>")),h("Status",i.readyToSend?"‚úì Ready":"‚úó Not Ready",i.readyToSend?"success":"error"),e?h("Buffered Deltas",i.deltasBuffered):""].join(""),l=[e?v("Deltas Sent",a.deltasSent.toLocaleString()):v("Deltas Received",a.deltasReceived.toLocaleString()),e?v("UDP Send Errors",a.udpSendErrors,a.udpSendErrors>0):"",e?v("UDP Retries",a.udpRetries):"",v("Compression Errors",a.compressionErrors,a.compressionErrors>0),v("Encryption Errors",a.encryptionErrors,a.encryptionErrors>0),e?v("Subscription Errors",a.subscriptionErrors,a.subscriptionErrors>0):"",!e&&a.duplicatePackets>0?v("Duplicate Packets",a.duplicatePackets.toLocaleString()):""].join(""),d='\n      <h4>üìä Performance Metrics</h4>\n      <div class="metrics-grid">'.concat(c,'</div>\n      <div class="metrics-stats">\n        <h5>Transmission Statistics</h5>\n        <div class="stats-grid">').concat(l,"</div>\n      </div>\n    ");if(e&&t.smartBatching){var u=t.smartBatching,p=u.earlySends+u.timerSends,m=p>0?Math.round(u.earlySends/p*100):0;d+='\n        <div class="metrics-stats">\n          <h5>üì¶ Smart Batching</h5>\n          <div class="stats-grid">\n            '.concat(v("Avg Bytes/Delta",u.avgBytesPerDelta+" bytes"),"\n            ").concat(v("Max Deltas/Batch",u.maxDeltasPerBatch),"\n            ").concat(v("Early Sends",u.earlySends.toLocaleString()+" ("+m+"%)"),"\n            ").concat(v("Timer Sends",u.timerSends.toLocaleString()),"\n            ").concat(v("Oversized Packets",u.oversizedPackets,u.oversizedPackets>0),"\n          </div>\n        </div>\n      ")}if(t.lastError){var f=t.lastError.timeAgo,g=f<6e4?"".concat(Math.floor(f/1e3),"s ago"):"".concat(Math.floor(f/6e4),"m ago");d+='\n        <div class="metrics-error">\n          <h5>‚ö†Ô∏è Last Error</h5>\n          <div class="error-message">'.concat(this.escapeHtml(t.lastError.message),'</div>\n          <div class="error-time">Occurred ').concat(g,"</div>\n        </div>\n      ")}else s||(d+='\n        <div class="metrics-success">\n          <div class="success-message">‚úì No errors detected</div>\n        </div>\n      ');n.innerHTML=d}}},{key:"updateNetworkQualityDisplay",value:function(t){var n=document.getElementById("networkQuality");if(n&&t.networkQuality){var e=t.networkQuality,a="client"===t.mode,i="N/A",r="#9E9E9E";void 0!==e.linkQuality&&(e.linkQuality>=90?(i="Excellent",r="#4CAF50"):e.linkQuality>=70?(i="Good",r="#FFC107"):e.linkQuality>=50?(i="Fair",r="#FF9800"):(i="Poor",r="#F44336"));var s=void 0!==e.linkQuality?e.linkQuality:0,o=s/100*180,c=Math.PI,l=c+o*Math.PI/180,d=40,u=50+d*Math.cos(c),p=50+d*Math.sin(c),m=50+d*Math.cos(l),f=50+d*Math.sin(l),g=o>180?1:0,y='\n      <svg viewBox="0 0 100 55" class="quality-gauge" preserveAspectRatio="xMidYMid meet">\n        <path d="M '.concat(10," ").concat(50," A ").concat(d," ").concat(d," 0 0 1 ").concat(90," ").concat(50,'"\n              fill="none" stroke="#E0E0E0" stroke-width="8" stroke-linecap="round"/>\n        ').concat(s>0?'<path d="M '.concat(u," ").concat(p," A ").concat(d," ").concat(d," 0 ").concat(g," 1 ").concat(m," ").concat(f,'"\n              fill="none" stroke="').concat(r,'" stroke-width="8" stroke-linecap="round"/>'):"",'\n        <text x="').concat(50,'" y="').concat(45,'" text-anchor="middle" font-size="16" font-weight="bold" fill="').concat(r,'">\n          ').concat(s,'\n        </text>\n        <text x="').concat(50,'" y="').concat(58,'" text-anchor="middle" font-size="7" fill="#666">\n          ').concat(i,"\n        </text>\n      </svg>\n    "),b=void 0!==e.rtt?e.rtt+" ms":"N/A",k=void 0!==e.jitter?e.jitter+" ms":"N/A",w='\n      <div class="network-quality-dashboard">\n        <div class="nq-hero">\n          <div class="nq-gauge-container">\n            '.concat(y,'\n            <div class="nq-gauge-label">Link Quality</div>\n          </div>\n          <div class="nq-key-metrics">\n            ').concat(h("RTT",b,e.rtt>500?"error":e.rtt>200?"warning":""),"\n            ").concat(h("Jitter",k,e.jitter>100?"error":e.jitter>50?"warning":""),'\n          </div>\n        </div>\n\n        <div class="nq-details">\n          <h5>Reliability Statistics</h5>\n          <div class="stats-grid">\n    ');w+=a?"\n            ".concat(v("Retransmissions",(e.retransmissions||0).toLocaleString(),e.retransmissions>0),"\n            ").concat(v("Queue Depth",(e.queueDepth||0).toLocaleString(),e.queueDepth>100),"\n      "):"\n            ".concat(v("ACKs Sent",(e.acksSent||0).toLocaleString()),"\n            ").concat(v("NAKs Sent",(e.naksSent||0).toLocaleString(),e.naksSent>0),"\n      "),w+="\n          </div>\n        </div>\n      </div>\n    ",n.innerHTML=w}}},{key:"updateBandwidthDisplay",value:function(t){var n=document.getElementById("bandwidth");if(n&&t.bandwidth){var e=t.bandwidth,a="client"===t.mode,i=a?e.bytesOutRaw-e.bytesOut:e.bytesInRaw-e.bytesIn,r=this.formatBytes(i>0?i:0),s=a?[p("Total Sent (Compressed)",e.bytesOutFormatted),p("Total Raw (Before Compression)",e.bytesOutRawFormatted),p("Bandwidth Saved",r,!0,!0),p("Packets Sent",e.packetsOut.toLocaleString())]:[p("Total Received (Compressed)",e.bytesInFormatted),p("Total Raw (After Decompression)",this.formatBytes(e.bytesInRaw||0)),p("Bandwidth Saved",r,!0,!0),p("Packets Received",e.packetsIn.toLocaleString())],o='\n      <div class="bandwidth-dashboard">\n        <div class="bandwidth-hero">\n          <div class="hero-stat '.concat(a?"primary":"secondary",'">\n            <div class="hero-value">').concat(a?e.rateOutFormatted:e.rateInFormatted,'</div>\n            <div class="hero-label">').concat(a?"Upload Rate":"Download Rate",'</div>\n          </div>\n          <div class="hero-stat success">\n            <div class="hero-value">').concat(e.compressionRatio,'%</div>\n            <div class="hero-label">Compression Ratio</div>\n          </div>\n          <div class="hero-stat">\n            <div class="hero-value">').concat(e.avgPacketSizeFormatted,'</div>\n            <div class="hero-label">Avg Packet Size</div>\n          </div>\n        </div>\n\n        <div class="bandwidth-details">\n          <h5>üìä Bandwidth Details</h5>\n          <div class="bandwidth-grid">').concat(s.join(""),"</div>\n        </div>\n\n        ").concat(this.renderBandwidthChart(e.history,a),"\n      </div>\n    ");n.innerHTML=o}}},{key:"renderBandwidthChart",value:function(t,n){if(!t||t.length<2)return'\n        <div class="bandwidth-chart-placeholder">\n          <p>Collecting data for chart... ('.concat(t?t.length:0,"/2 points)</p>\n        </div>\n      ");var i=Math.max.apply(Math,function(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.map(function(t){return n?t.rateOut:t.rateIn})).concat([1])),r=t.map(function(e,a){var r=a/(t.length-1)*100,s=40-(n?e.rateOut:e.rateIn)/i*40;return"".concat(r,",").concat(s)}).join(" "),s=this.formatBytes(i);return'\n      <div class="bandwidth-chart">\n        <h5>üìà Rate History (Last '.concat(15*t.length,'s)</h5>\n        <div class="chart-container">\n          <svg viewBox="0 0 ').concat(100," ").concat(40,'" class="sparkline" preserveAspectRatio="none">\n            <polyline\n              fill="none"\n              stroke="var(--primary-color)"\n              stroke-width="1.5"\n              points="').concat(r,'"\n            />\n          </svg>\n          <div class="chart-labels">\n            <span class="chart-max">').concat(s,'/s</span>\n            <span class="chart-min">0</span>\n          </div>\n        </div>\n      </div>\n    ')}},{key:"updatePathAnalyticsDisplay",value:function(t){var n=this,e=document.getElementById("pathAnalytics");if(e&&t.pathStats){var a=t.pathStats;if(0!==a.length){var i=new Set(a.map(function(t){return t.path.split(".")[0]})).size,r='\n      <div class="path-analytics-dashboard">\n        <div class="path-summary">\n          <div class="summary-stat">\n            <span class="summary-value">'.concat(a.length,'</span>\n            <span class="summary-label">Active Paths</span>\n          </div>\n          <div class="summary-stat">\n            <span class="summary-value">').concat(i,'</span>\n            <span class="summary-label">Categories</span>\n          </div>\n        </div>\n\n        <div class="path-table-container">\n          <table class="path-table">\n            <thead>\n              <tr>\n                <th>Path</th>\n                <th>Updates/min</th>\n                <th>Data Volume</th>\n                <th>% of Total</th>\n              </tr>\n            </thead>\n            <tbody>\n    ');a.slice(0,15).forEach(function(t){var e=Math.max(t.percentage,2);r+='\n        <tr>\n          <td class="path-name" title="'.concat(n.escapeHtml(t.path),'">').concat(n.escapeHtml(t.path),'</td>\n          <td class="path-rate">').concat(t.updatesPerMinute,'</td>\n          <td class="path-bytes">').concat(t.bytesFormatted,'</td>\n          <td class="path-percentage">\n            <div class="percentage-bar-container">\n              <div class="percentage-bar" style="width: ').concat(e,'%"></div>\n              <span class="percentage-text">').concat(t.percentage,"%</span>\n            </div>\n          </td>\n        </tr>\n      ")}),r+="\n            </tbody>\n          </table>\n        </div>\n    ",a.length>15&&(r+='\n        <div class="path-more">\n          <p>Showing top 15 of '.concat(a.length," paths</p>\n        </div>\n      ")),r+="</div>",e.innerHTML=r}else e.innerHTML='\n        <div class="path-analytics-empty">\n          <p>No path data collected yet. Data will appear once deltas are transmitted.</p>\n        </div>\n      '}}},{key:"updateCongestionDisplay",value:function(t){var n=document.getElementById("congestionSection"),e=document.getElementById("congestionControl");if(n&&e){n.style.display="";var a=(t.state||"unknown").replace(/-/g," "),i="slow-start"===t.state?"warning":"congestion-avoidance"===t.state?"success":"",r="auto"===t.mode?"Automatic":"Manual Override",s='\n      <div class="v2-dashboard">\n        <div class="metrics-grid">\n          '.concat(h("State",'<span class="congestion-state '.concat(i,'">').concat(a,"</span>")),"\n          ").concat(h("Mode",r),"\n          ").concat(h("Window Size",t.windowSize||0),"\n          ").concat(h("Delta Timer",(t.currentDeltaTimer||t.deltaTimer||0)+" ms"),'\n        </div>\n        <div class="metrics-stats">\n          <h5>Congestion Details</h5>\n          <div class="stats-grid">\n            ').concat(v("Min Delta Timer",(t.minDeltaTimer||0)+" ms"),"\n            ").concat(v("Max Delta Timer",(t.maxDeltaTimer||0)+" ms"),"\n            ").concat(v("Avg RTT",(void 0!==t.avgRTT?Math.round(t.avgRTT):0)+" ms"),"\n            ").concat(v("Avg Packet Loss",(void 0!==t.avgLoss?(100*t.avgLoss).toFixed(1):0)+"%",t.avgLoss>.05),"\n          </div>\n        </div>\n      </div>\n    ");e.innerHTML=s}}},{key:"updateBondingDisplay",value:function(t){var e=this,a=document.getElementById("bondingSection"),i=document.getElementById("bondingStatus");if(a&&i)if(t.enabled){a.style.display="";var r=(t.mode||"active-backup").replace(/-/g," "),s=t.activeLink||"primary",o="";t.links&&(o=Object.entries(t.links).map(function(t){var a=n(t,2),i=a[0],r=a[1],o=i===s,c=r.alive?"success":"error";return'\n          <div class="bonding-link '.concat(o?"active":"",'">\n            <div class="link-header">\n              <span class="link-name">').concat(e.escapeHtml(i),"</span>\n              ").concat(o?'<span class="link-badge active-badge">ACTIVE</span>':"",'\n              <span class="link-badge ').concat(c,'">').concat(r.alive?"UP":"DOWN",'</span>\n            </div>\n            <div class="link-stats">\n              ').concat(v("RTT",(r.rtt||0)+" ms"),"\n              ").concat(v("Packet Loss",(100*(r.packetLoss||0)).toFixed(1)+"%"),"\n            </div>\n          </div>\n        ")}).join(""));var c='\n      <div class="v2-dashboard">\n        <div class="metrics-grid">\n          '.concat(h("Mode",r),"\n          ").concat(h("Active Link",s),'\n        </div>\n        <div class="bonding-links">').concat(o,'</div>\n        <div style="margin-top: 1rem;">\n          <button id="failoverBtn" class="btn btn-secondary">Force Failover</button>\n        </div>\n      </div>\n    ');i.innerHTML=c;var l=document.getElementById("failoverBtn");l&&l.addEventListener("click",function(){return e.triggerFailover()})}else a.style.display="none"}},{key:"triggerFailover",value:(s=o(i().m(function t(){var n,e,a,r;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("".concat(d,"/bonding/failover"),{method:"POST"});case 1:if(!(n=t.v).ok){t.n=3;break}return t.n=2,n.json();case 2:e=t.v,this.showNotification("Failover complete. Active link: ".concat(e.activeLink),"success"),this.loadMetrics(),t.n=5;break;case 3:return t.n=4,n.json();case 4:a=t.v,this.showNotification("Failover failed: "+(a.error||"Unknown error"),"error");case 5:t.n=7;break;case 6:t.p=6,r=t.v,this.showNotification("Failover failed: "+r.message,"error");case 7:return t.a(2)}},t,this,[[0,6]])})),function(){return s.apply(this,arguments)})},{key:"updateMonitoringDisplay",value:function(t){var e=document.getElementById("monitoringSection"),a=document.getElementById("monitoringAlerts");if(e&&a)if(t.alerts||t.packetLoss||t.retransmissions){e.style.display="";var i='<div class="v2-dashboard">';if(t.alerts){var r=t.alerts.activeAlerts||{},s=Object.entries(r),o=s.filter(function(t){return"ok"!==n(t,2)[1]}).length;i+='\n        <div class="monitoring-subsection">\n          <h5>Active Alerts</h5>\n          '.concat(0===o?'<div class="metrics-success"><div class="success-message">No active alerts</div></div>':'<div class="stats-grid">\n                '.concat(s.map(function(t){var e=n(t,2),a=e[0],i=e[1];return v(a,'<span class="alert-level alert-'.concat(i,'">').concat(i.toUpperCase(),"</span>"),"critical"===i)}).join(""),"\n              </div>"),"\n        </div>\n      ")}if(t.packetLoss&&t.packetLoss.summary){var c=t.packetLoss.summary;i+='\n        <div class="monitoring-subsection">\n          <h5>Packet Loss</h5>\n          <div class="stats-grid">\n            '.concat(v("Overall Loss Rate",(100*c.overallLossRate).toFixed(2)+"%",c.overallLossRate>.05),"\n            ").concat(v("Max Loss Rate",(100*c.maxLossRate).toFixed(2)+"%",c.maxLossRate>.1),"\n            ").concat(v("Trend",c.trend||"stable"),"\n          </div>\n        </div>\n      ")}if(t.retransmissions&&t.retransmissions.summary){var l=t.retransmissions.summary;i+='\n        <div class="monitoring-subsection">\n          <h5>Retransmission Rates</h5>\n          <div class="stats-grid">\n            '.concat(v("Current Rate",(100*l.currentRate).toFixed(2)+"%",l.currentRate>.05),"\n            ").concat(v("Average Rate",(100*l.avgRate).toFixed(2)+"%"),"\n            ").concat(v("Max Rate",(100*l.maxRate).toFixed(2)+"%",l.maxRate>.1),"\n          </div>\n        </div>\n      ")}i+="</div>",a.innerHTML=i}else e.style.display="none"}},{key:"formatBytes",value:function(t){if(!t||t<=0)return"0 B";var n=["B","KB","MB","GB"],e=Math.min(Math.floor(Math.log(t)/Math.log(1024)),n.length-1);return parseFloat((t/Math.pow(1024,e)).toFixed(2))+" "+n[e]}},{key:"escapeHtml",value:function(t){var n=document.createElement("div");return n.textContent=t,n.innerHTML}},{key:"updateStatus",value:function(){var t=this,n=document.getElementById("status"),e="<h4>Configuration Status</h4>";if(this.deltaTimerConfig?e+='\n                <div class="status-item">\n                    <strong>Delta Timer:</strong> '.concat(this.escapeHtml(String(this.deltaTimerConfig.deltaTimer)),'ms\n                    <span class="status-indicator success">‚úì Configured</span>\n                </div>\n            '):e+='\n                <div class="status-item">\n                    <strong>Delta Timer:</strong>\n                    <span class="status-indicator warning">‚ö† Not configured</span>\n                </div>\n            ',this.subscriptionConfig&&this.subscriptionConfig.subscribe){var a=this.subscriptionConfig.subscribe.length,i=this.escapeHtml(this.subscriptionConfig.context||""),r=this.subscriptionConfig.subscribe.map(function(n){return t.escapeHtml(n.path)}).join(", ");e+='\n                <div class="status-item">\n                    <strong>Subscriptions:</strong> '.concat(a,' path(s) configured\n                    <span class="status-indicator success">‚úì Configured</span>\n                </div>\n                <div class="status-details">\n                    <strong>Context:</strong> ').concat(i,"<br>\n                    <strong>Paths:</strong> ").concat(r,"\n                </div>\n            ")}else e+='\n                <div class="status-item">\n                    <strong>Subscriptions:</strong>\n                    <span class="status-indicator warning">‚ö† Not configured</span>\n                </div>\n            ';if(this.sentenceFilterConfig&&this.sentenceFilterConfig.excludedSentences&&this.sentenceFilterConfig.excludedSentences.length>0){var s=this.sentenceFilterConfig.excludedSentences.length,o=this.sentenceFilterConfig.excludedSentences.map(function(n){return t.escapeHtml(n)}).join(", ");e+='\n                <div class="status-item">\n                    <strong>Sentence Filter:</strong> '.concat(s,' sentence(s) excluded\n                    <span class="status-indicator success">‚úì Configured</span>\n                </div>\n                <div class="status-details">\n                    <strong>Excluded:</strong> ').concat(o,"\n                </div>\n            ")}else e+='\n                <div class="status-item">\n                    <strong>Sentence Filter:</strong>\n                    <span class="status-indicator info">‚Ñπ No filters (all sentences transmitted)</span>\n                </div>\n            ';n.innerHTML=e}},{key:"showServerModeUI",value:function(){document.querySelector(".container").innerHTML='\n      <div class="config-section">\n        <div class="card server-mode-card">\n          <div class="card-header">\n            <h2>Server Mode Active</h2>\n            <p>This plugin is running in Server Mode - receiving data from clients</p>\n          </div>\n          <div class="card-content">\n            <div class="server-mode-info">\n              <div class="info-grid compact">\n                <div class="info-item">\n                  <h4>Configuration</h4>\n                  <p>Managed through SignalK plugin settings</p>\n                </div>\n                <div class="info-item">\n                  <h4>Data Flow</h4>\n                  <p>Client Devices ‚Üí Server ‚Üí SignalK</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    '+u("Network Quality","Link quality score and network health indicators","networkQuality")+u("Bandwidth Monitor","Network reception statistics","bandwidth")+u("Path Analytics","Incoming data volume by SignalK path","pathAnalytics")+u("Performance Metrics","Real-time reception statistics (auto-refreshes every 15 seconds)","metrics")+'<div id="monitoringSection" style="display:none;">'+u("Monitoring & Alerts","Packet loss, retransmission tracking, and alert thresholds","monitoringAlerts")+"</div>"}},{key:"showNotification",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",e=document.getElementById("notification");e.textContent=t,e.className="notification ".concat(n," show"),setTimeout(function(){e.classList.remove("show")},4e3)}}],r&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,s,l,m,f,g,y,b,k,w,S}();document.addEventListener("DOMContentLoaded",function(){window.dataConnectorConfig=new m}),document.addEventListener("visibilitychange",function(){window.dataConnectorConfig&&(document.hidden?window.dataConnectorConfig.metricsInterval&&(clearInterval(window.dataConnectorConfig.metricsInterval),window.dataConnectorConfig.metricsInterval=null):window.dataConnectorConfig.metricsInterval||(window.dataConnectorConfig.loadMetrics(),window.dataConnectorConfig.startMetricsRefresh()))}),window.addEventListener("beforeunload",function(){window.dataConnectorConfig&&window.dataConnectorConfig.metricsInterval&&(clearInterval(window.dataConnectorConfig.metricsInterval),window.dataConnectorConfig.metricsInterval=null)})}},n={};function e(a){var i=n[a];if(void 0!==i)return i.exports;var r=n[a]={exports:{}};return t[a](r,r.exports,e),r.exports}e.m=t,e.c=n,e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),(()=>{e.S={};var t={},n={};e.I=(a,i)=>{i||(i=[]);var r=n[a];if(r||(r=n[a]={}),!(i.indexOf(r)>=0)){if(i.push(r),t[a])return t[a];e.o(e.S,a)||(e.S[a]={}),e.S[a];var s=[];return t[a]=s.length?Promise.all(s).then(()=>t[a]=1):1}}})(),e(2154)})();
//# sourceMappingURL=main.e1464a156d8d46f82078.js.map