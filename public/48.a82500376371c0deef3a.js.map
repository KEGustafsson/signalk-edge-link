{"version":3,"file":"48.a82500376371c0deef3a.js","mappings":"mqCAEA,IAAMA,EAAW,6BAGXC,EAAa,CACjB,CACEC,KAAM,aACNC,MAAO,iBACPC,YAAa,wDACbC,KAAM,SACNC,QAAS,CACP,CAAEC,MAAO,SAAUJ,MAAO,2BAC1B,CAAEI,MAAO,SAAUJ,MAAO,+BAE5BK,aAAc,UAEhB,CACEN,KAAM,UACNC,MAAO,WACPC,YAAa,2DACbC,KAAM,SACNI,IAAK,KACLC,IAAK,MACLF,aAAc,MAEhB,CACEN,KAAM,YACNC,MAAO,iBACPC,YAAa,oDACbC,KAAM,WACNM,UAAW,GACXC,UAAW,IAEb,CACEV,KAAM,aACNC,MAAO,kBACPC,YACE,sEACFC,KAAM,WACNG,cAAc,GAEhB,CACEN,KAAM,oBACNC,MAAO,sBACPC,YACE,8EACFC,KAAM,WACNG,cAAc,GAEhB,CACEN,KAAM,kBACNC,MAAO,mBACPC,YACE,kOACFC,KAAM,SACNC,QAAS,CACP,CAAEC,MAAO,EAAGJ,MAAO,+BACnB,CAAEI,MAAO,EAAGJ,MAAO,2DAErBK,aAAc,EACdK,SAAS,IAIPC,EAAe,CACnB,CACEZ,KAAM,aACNC,MAAO,iBACPC,YAAa,+CACbC,KAAM,OACNG,aAAc,aAEhB,CACEN,KAAM,qBACNC,MAAO,+BACPC,YAAa,uCACbC,KAAM,SACNI,IAAK,GACLC,IAAK,KACLF,aAAc,IAEhB,CACEN,KAAM,cACNC,MAAO,4BACPC,YAAa,sDACbC,KAAM,OACNG,aAAc,aAEhB,CACEN,KAAM,WACNC,MAAO,yBACPC,YAAa,2CACbC,KAAM,SACNI,IAAK,EACLC,IAAK,MACLF,aAAc,IAEhB,CACEN,KAAM,mBACNC,MAAO,2BACPC,YAAa,yCACbC,KAAM,SACNI,IAAK,GACLC,IAAK,GACLK,KAAM,GACNP,aAAc,IAIZQ,EAAmB,CACvB,CACEd,KAAM,UACNC,MAAO,4BACPC,YAAa,gEACbC,KAAM,WACNG,cAAc,GAEhB,CACEN,KAAM,YACNC,MAAO,kBACPC,YAAa,iDACbC,KAAM,SACNI,IAAK,GACLC,IAAK,IACLF,aAAc,KAEhB,CACEN,KAAM,gBACNC,MAAO,2BACPC,YAAa,gCACbC,KAAM,SACNI,IAAK,GACLC,IAAK,IACLF,aAAc,KAEhB,CACEN,KAAM,gBACNC,MAAO,2BACPC,YAAa,gCACbC,KAAM,SACNI,IAAK,IACLC,IAAK,IACLF,aAAc,MAIZS,EAAe,CACnB,CACEV,MAAO,cACPJ,MAAO,2DAILe,EAAa,CACjB,CACEhB,KAAM,UACNC,MAAO,iBACPE,KAAM,OACNG,aAAc,aAEhB,CAAEN,KAAM,OAAQC,MAAO,WAAYE,KAAM,SAAUI,IAAK,KAAMC,IAAK,OACnE,CACER,KAAM,YACNC,MAAO,4BACPC,YAAa,kCACbC,KAAM,SAIJc,EAAiB,CACrB,CACEjB,KAAM,eACNC,MAAO,qBACPC,YAAa,uCACbC,KAAM,SACNI,IAAK,IACLC,IAAK,IACLF,aAAc,KAEhB,CACEN,KAAM,gBACNC,MAAO,wBACPC,YAAa,oDACbC,KAAM,SACNI,IAAK,IACLC,IAAK,GACLK,KAAM,IACNP,aAAc,IAEhB,CACEN,KAAM,sBACNC,MAAO,6BACPC,YAAa,iCACbC,KAAM,SACNI,IAAK,IACLC,IAAK,IACLF,aAAc,KAEhB,CACEN,KAAM,gBACNC,MAAO,sBACPC,YAAa,4DACbC,KAAM,SACNI,IAAK,IACLC,IAAK,IACLF,aAAc,MAKlB,SAASY,EAASC,GAA6B,IAA1BC,EAAKD,EAALC,MAAOf,EAAKc,EAALd,MAAOgB,EAAQF,EAARE,SAC3BC,EAAK,SAAWF,EAAMpB,KAE5B,MAAmB,aAAfoB,EAAMjB,KAENoB,IAAAA,cAAA,OAAKC,UAAU,aAAaC,IAAKL,EAAMpB,MACrCuB,IAAAA,cAAA,aACEA,IAAAA,cAAA,SACED,GAAIA,EACJnB,KAAK,WACLuB,UAAWrB,EACXgB,SAAU,SAACM,GAAC,OAAKN,EAASD,EAAMpB,KAAM2B,EAAEC,OAAOF,QAAQ,IACtD,IACFN,EAAMnB,OAERmB,EAAMlB,aACLqB,IAAAA,cAAA,KAAGC,UAAU,qBAAqBJ,EAAMlB,cAM7B,WAAfkB,EAAMjB,KAENoB,IAAAA,cAAA,OAAKC,UAAU,aAAaC,IAAKL,EAAMpB,MACrCuB,IAAAA,cAAA,SAAOM,QAASP,GAAKF,EAAMnB,OAC3BsB,IAAAA,cAAA,UACED,GAAIA,EACJE,UAAU,eACVnB,MAAOA,QAAwCA,EAAQe,EAAMd,cAAgB,GAC7Ee,SAAU,SAACM,GACT,IAAMG,EAAMH,EAAEC,OAAOvB,MACrBgB,EAASD,EAAMpB,KAAMoB,EAAMT,QAAUoB,OAAOD,GAAOA,EACrD,GAECV,EAAMhB,QAAQ4B,IAAI,SAACC,GAAG,OACrBV,IAAAA,cAAA,UAAQE,IAAKQ,EAAI5B,MAAOA,MAAO4B,EAAI5B,OAChC4B,EAAIhC,MACE,IAGZmB,EAAMlB,aACLqB,IAAAA,cAAA,KAAGC,UAAU,qBAAqBJ,EAAMlB,cAQ9CqB,IAAAA,cAAA,OAAKC,UAAU,aAAaC,IAAKL,EAAMpB,MACrCuB,IAAAA,cAAA,SAAOM,QAASP,GAAKF,EAAMnB,OAC3BsB,IAAAA,cAAA,SACED,GAAIA,EACJE,UAAU,eACVrB,KAAMiB,EAAMjB,KACZE,MAAOA,QAAwCA,EAAQ,GACvDE,IAAKa,EAAMb,IACXC,IAAKY,EAAMZ,IACXK,KAAMO,EAAMP,KACZJ,UAAWW,EAAMX,UACjBC,UAAWU,EAAMV,UACjBW,SAAU,SAACM,GACT,IAAMG,EAAMH,EAAEC,OAAOvB,MACrBgB,EAASD,EAAMpB,KAAqB,WAAfoB,EAAMjB,KAA6B,KAAR2B,EAAa,GAAKC,OAAOD,GAAQA,EACnF,IAEDV,EAAMlB,aACLqB,IAAAA,cAAA,KAAGC,UAAU,qBAAqBJ,EAAMlB,aAIhD,CAGA,SAASgC,EAAUC,GAAiD,IAA9CC,EAAKD,EAALC,MAAOlC,EAAWiC,EAAXjC,YAAamC,EAAMF,EAANE,OAAQC,EAAIH,EAAJG,KAAMjB,EAAQc,EAARd,SACtD,OACEE,IAAAA,cAAA,YAAUC,UAAU,eAClBD,IAAAA,cAAA,cAASa,GACRlC,GAAeqB,IAAAA,cAAA,KAAGC,UAAU,qBAAqBtB,GACjDmC,EAAOL,IAAI,SAACZ,GAAK,OAChBG,IAAAA,cAACL,EAAS,CACRO,IAAKL,EAAMpB,KACXoB,MAAOA,EACPf,MAAOiC,EAAOA,EAAKlB,EAAMpB,WAAQuC,EACjClB,SAAUA,GACV,GAIV,CA4WA,QAtWA,WACE,IAA4CmB,EAAAC,GAAZC,EAAAA,EAAAA,UAAS,CAAC,GAAE,GAArCC,EAAQH,EAAA,GAAEI,EAAWJ,EAAA,GACgBK,EAAAJ,GAAdC,EAAAA,EAAAA,WAAS,GAAK,GAArCI,EAAOD,EAAA,GAAEE,EAAUF,EAAA,GACcG,EAAAP,GAAdC,EAAAA,EAAAA,UAAS,MAAK,GAAjCO,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GAC4BG,EAAAV,GAAdC,EAAAA,EAAAA,UAAS,MAAK,GAA3CU,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAE1BG,EAAuC,WAAxBX,EAASY,YAG9BC,EAAAA,EAAAA,WAAU,WACR,IAAIC,GAAY,EAuBhB,OAtBAC,MAAM5D,EAAW,kBACd6D,KAAK,SAACC,GACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAM,mBAAqBF,EAASG,YAEhD,OAAOH,EAASI,MAClB,GACCL,KAAK,SAACrB,IACAmB,GAAanB,EAAK2B,SAAW3B,EAAK4B,eACrCtB,EAAYN,EAAK4B,cAErB,GAAE,MACK,SAACC,GACDV,GACHP,EAASiB,EAAIC,QAEjB,GAAE,QACO,WACFX,GACHV,GAAW,EAEf,GACK,WACLU,GAAY,CACd,CACF,EAAG,IAGH,IAAMY,GAAoBC,EAAAA,EAAAA,aAAY,SAACtE,EAAMK,GAC3CuC,EAAY,SAAC2B,GACX,IAAMC,EAAOC,OAAOC,OAAO,CAAC,EAAGH,GAE/B,OADAC,EAAKxE,GAAQK,EACNmE,CACT,GACAnB,EAAc,KAChB,EAAG,IAGGsB,GAAqBL,EAAAA,EAAAA,aAAY,SAACM,EAAS5E,EAAMK,GACrDuC,EAAY,SAAC2B,GACX,IAAMC,EAAOC,OAAOC,OAAO,CAAC,EAAGH,GAG/B,OAFAC,EAAKI,GAAWH,OAAOC,OAAO,CAAC,EAAGH,EAAKK,IACvCJ,EAAKI,GAAS5E,GAAQK,EACfmE,CACT,GACAnB,EAAc,KAChB,EAAG,IAGGwB,GAAyBP,EAAAA,EAAAA,aAAY,SAACM,EAASE,EAAY9E,EAAMK,GACrEuC,EAAY,SAAC2B,GACX,IAAMC,EAAOC,OAAOC,OAAO,CAAC,EAAGH,GAI/B,OAHAC,EAAKI,GAAWH,OAAOC,OAAO,CAAC,EAAGH,EAAKK,IACvCJ,EAAKI,GAASE,GAAcL,OAAOC,OAAO,CAAC,GAAIH,EAAKK,IAAY,CAAC,GAAGE,IACpEN,EAAKI,GAASE,GAAY9E,GAAQK,EAC3BmE,CACT,GACAnB,EAAc,KAChB,EAAG,IAGG0B,GAAeT,EAAAA,EAAAA,aACnB,SAAC3C,GACCA,EAAEqD,iBACF3B,EAAc,CAAElD,KAAM,SAAUiE,QAAS,cAGzC,IAAMa,EAAcR,OAAOC,OAAO,CAAC,EAAG/B,GACP,WAA3BsC,EAAY1B,oBACP0B,EAAYC,kBACZD,EAAYE,0BACZF,EAAYG,mBACZH,EAAYI,gBACZJ,EAAYK,wBACZL,EAAYM,yBACZN,EAAYO,SAGrB9B,MAAM5D,EAAW,iBAAkB,CACjC2F,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAUZ,KAEpBtB,KAAK,SAACC,GACL,OAAOA,EAASI,OAAOL,KAAK,SAACrB,GAC3B,IAAIsB,EAASC,KAAMvB,EAAK2B,QAMtB,MAAM,IAAIH,MAAMxB,EAAKW,OAAS,kBAL9BI,EAAc,CACZlD,KAAM,UACNiE,QAAS9B,EAAK8B,SAAW,6CAK/B,EACF,GAAE,MACK,SAACD,GACNd,EAAc,CAAElD,KAAM,QAASiE,QAASD,EAAIC,SAC9C,EACJ,EACA,CAACzB,IAGH,GAAIG,EACF,OACEvB,IAAAA,cAAA,OAAKuE,MAAO,CAAEC,QAAS,OAAQC,UAAW,WAAY,4BAM1D,GAAI/C,EACF,OACE1B,IAAAA,cAAA,OAAKuE,MAAO,CAAEC,QAAS,OAAQE,MAAO,YACpC1E,IAAAA,cAAA,UAAI,+BACJA,IAAAA,cAAA,SAAI0B,IAKV,IAAMiD,EACJ9C,GAAkC,YAApBA,EAAWjD,KACrB,UACAiD,GAAkC,UAApBA,EAAWjD,KACvB,UACA,UACFgG,EACJ/C,GAAkC,YAApBA,EAAWjD,KACrB,UACAiD,GAAkC,UAApBA,EAAWjD,KACvB,UACA,UACFiG,EACJhD,GAAkC,YAApBA,EAAWjD,KACrB,UACAiD,GAAkC,UAApBA,EAAWjD,KACvB,UACA,UAER,OACEoB,IAAAA,cAAA,OAAKC,UAAU,4BACZ4B,GACC7B,IAAAA,cAAA,OACEuE,MAAO,CACLC,QAAS,YACTM,aAAc,OACdC,aAAc,MACdC,gBAAiBL,EACjBD,MAAOE,EACPK,OAAQ,aAAeJ,IAGxBhD,EAAWgB,SAIhB7C,IAAAA,cAAA,QAAMkF,SAAU1B,GACdxD,IAAAA,cAAA,UAAI,qBACJA,IAAAA,cAAA,KAAGC,UAAU,qBAAoB,mEAIhCzB,EAAWiC,IAAI,SAACZ,GAAK,OACpBG,IAAAA,cAACL,EAAS,CACRO,IAAKL,EAAMpB,KACXoB,MAAOA,EACPf,MAAOsC,EAASvB,EAAMpB,MACtBqB,SAAUgD,GACV,GAGHf,GACC1C,EAAaoB,IAAI,SAACZ,GAAK,OACrBG,IAAAA,cAACL,EAAS,CACRO,IAAKL,EAAMpB,KACXoB,MAAOA,EACPf,MAAOsC,EAASvB,EAAMpB,MACtBqB,SAAUgD,GACV,GAGLf,GACC/B,IAAAA,cAACW,EAAU,CACTE,MAAM,uCACNlC,YAAY,mGACZmC,OAAQvB,EACRwB,KAAMK,EAAS4C,kBACflE,SAAU,SAACrB,EAAMK,GACfsE,EAAmB,oBAAqB3E,EAAMK,EAChD,IAIHiD,GACC/B,IAAAA,cAAA,YAAUC,UAAU,eAClBD,IAAAA,cAAA,cAAQ,gCACRA,IAAAA,cAAA,KAAGC,UAAU,qBAAoB,0GAKjCD,IAAAA,cAAA,OAAKC,UAAU,cACbD,IAAAA,cAAA,aACEA,IAAAA,cAAA,SACEpB,KAAK,WACLuB,WAAYiB,EAAS6C,UAAW7C,EAAS6C,QAAQkB,SACjDrF,SAAU,SAACM,GACTgD,EAAmB,UAAW,UAAWhD,EAAEC,OAAOF,QACpD,IACC,IAAI,6BAGTH,IAAAA,cAAA,KAAGC,UAAU,qBAAoB,qDAKnCD,IAAAA,cAAA,OAAKC,UAAU,cACbD,IAAAA,cAAA,SAAOM,QAAQ,sBAAqB,gBACpCN,IAAAA,cAAA,UACED,GAAG,qBACHE,UAAU,eACVnB,MACEsC,EAAS6C,SAAW7C,EAAS6C,QAAQmB,KACjChE,EAAS6C,QAAQmB,KACjB,cAENtF,SAAU,SAACM,GACTgD,EAAmB,UAAW,OAAQhD,EAAEC,OAAOvB,MACjD,GAECU,EAAaiB,IAAI,SAACC,GAAG,OACpBV,IAAAA,cAAA,UAAQE,IAAKQ,EAAI5B,MAAOA,MAAO4B,EAAI5B,OAChC4B,EAAIhC,MACE,KAKfsB,IAAAA,cAACW,EAAU,CACTE,MAAM,eACNlC,YAAY,uCACZmC,OAAQrB,EAAWgB,IAAI,SAAC4E,GAAC,OACvBnC,OAAOC,OAAO,CAAC,EAAGkC,EAAG,CACnBtG,aAAyB,SAAXsG,EAAE5G,KAAkB,KAAO4G,EAAEtG,cAC3C,GAEJgC,KAAMK,EAAS6C,QAAU7C,EAAS6C,QAAQqB,aAAUtE,EACpDlB,SAAU,SAACrB,EAAMK,GACfwE,EAAuB,UAAW,UAAW7E,EAAMK,EACrD,IAGFkB,IAAAA,cAACW,EAAU,CACTE,MAAM,cACNlC,YAAY,gDACZmC,OAAQrB,EAAWgB,IAAI,SAAC4E,GAAC,OACvBnC,OAAOC,OAAO,CAAC,EAAGkC,EAAG,CACnBtG,aAAyB,SAAXsG,EAAE5G,KAAkB,KAAO4G,EAAEtG,cAC3C,GAEJgC,KAAMK,EAAS6C,QAAU7C,EAAS6C,QAAQsB,YAASvE,EACnDlB,SAAU,SAACrB,EAAMK,GACfwE,EAAuB,UAAW,SAAU7E,EAAMK,EACpD,IAGFkB,IAAAA,cAACW,EAAU,CACTE,MAAM,sBACNlC,YAAY,uCACZmC,OAAQpB,EACRqB,KAAMK,EAAS6C,QAAU7C,EAAS6C,QAAQuB,cAAWxE,EACrDlB,SAAU,SAACrB,EAAMK,GACfwE,EAAuB,UAAW,WAAY7E,EAAMK,EACtD,KAKNkB,IAAAA,cAAA,UAAQpB,KAAK,SAASqB,UAAU,mBAAkB,uBAKpDD,IAAAA,cAAA,aAAQ,yqCA8Dd,C","sources":["webpack://signalk-edge-link/./src/components/PluginConfigurationPanel.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\"; // eslint-disable-line no-unused-vars\n\nconst API_BASE = \"/plugins/signalk-edge-link\";\n\n// Field definitions keyed by property name\nconst baseFields = [\n  {\n    name: \"serverType\",\n    label: \"Operation Mode\",\n    description: \"Select Server to receive data, or Client to send data\",\n    type: \"select\",\n    options: [\n      { value: \"client\", label: \"Client Mode - Send Data\" },\n      { value: \"server\", label: \"Server Mode - Receive Data\" }\n    ],\n    defaultValue: \"client\"\n  },\n  {\n    name: \"udpPort\",\n    label: \"UDP Port\",\n    description: \"UDP port for data transmission (must match on both ends)\",\n    type: \"number\",\n    min: 1024,\n    max: 65535,\n    defaultValue: 4446\n  },\n  {\n    name: \"secretKey\",\n    label: \"Encryption Key\",\n    description: \"32-character secret key (must match on both ends)\",\n    type: \"password\",\n    minLength: 32,\n    maxLength: 32\n  },\n  {\n    name: \"useMsgpack\",\n    label: \"Use MessagePack\",\n    description:\n      \"Binary serialization for smaller payloads (must match on both ends)\",\n    type: \"checkbox\",\n    defaultValue: false\n  },\n  {\n    name: \"usePathDictionary\",\n    label: \"Use Path Dictionary\",\n    description:\n      \"Encode paths as numeric IDs for bandwidth savings (must match on both ends)\",\n    type: \"checkbox\",\n    defaultValue: false\n  },\n  {\n    name: \"protocolVersion\",\n    label: \"Protocol Version\",\n    description:\n      \"v1: encrypted UDP transmission. v2 adds: packet reliability (sequence tracking, ACK/NAK, retransmission), congestion control, connection bonding with failover, metrics/monitoring, and NAT keepalive. Must match on both ends.\",\n    type: \"select\",\n    options: [\n      { value: 1, label: \"v1 - Standard encrypted UDP\" },\n      { value: 2, label: \"v2 - Reliability, congestion control, bonding, metrics\" }\n    ],\n    defaultValue: 1,\n    numeric: true\n  }\n];\n\nconst clientFields = [\n  {\n    name: \"udpAddress\",\n    label: \"Server Address\",\n    description: \"IP address or hostname of the SignalK server\",\n    type: \"text\",\n    defaultValue: \"127.0.0.1\"\n  },\n  {\n    name: \"helloMessageSender\",\n    label: \"Heartbeat Interval (seconds)\",\n    description: \"How often to send heartbeat messages\",\n    type: \"number\",\n    min: 10,\n    max: 3600,\n    defaultValue: 60\n  },\n  {\n    name: \"testAddress\",\n    label: \"Connectivity Test Address\",\n    description: \"Address to ping for network testing (e.g., 8.8.8.8)\",\n    type: \"text\",\n    defaultValue: \"127.0.0.1\"\n  },\n  {\n    name: \"testPort\",\n    label: \"Connectivity Test Port\",\n    description: \"Port for connectivity test (80, 443, 53)\",\n    type: \"number\",\n    min: 1,\n    max: 65535,\n    defaultValue: 80\n  },\n  {\n    name: \"pingIntervalTime\",\n    label: \"Check Interval (minutes)\",\n    description: \"How often to test network connectivity\",\n    type: \"number\",\n    min: 0.1,\n    max: 60,\n    step: 0.1,\n    defaultValue: 1\n  }\n];\n\nconst congestionFields = [\n  {\n    name: \"enabled\",\n    label: \"Enable Congestion Control\",\n    description: \"Automatically adjust delta timer based on RTT and packet loss\",\n    type: \"checkbox\",\n    defaultValue: false\n  },\n  {\n    name: \"targetRTT\",\n    label: \"Target RTT (ms)\",\n    description: \"RTT threshold above which send rate is reduced\",\n    type: \"number\",\n    min: 50,\n    max: 2000,\n    defaultValue: 200\n  },\n  {\n    name: \"minDeltaTimer\",\n    label: \"Minimum Delta Timer (ms)\",\n    description: \"Fastest allowed send interval\",\n    type: \"number\",\n    min: 50,\n    max: 1000,\n    defaultValue: 100\n  },\n  {\n    name: \"maxDeltaTimer\",\n    label: \"Maximum Delta Timer (ms)\",\n    description: \"Slowest allowed send interval\",\n    type: \"number\",\n    min: 1000,\n    max: 30000,\n    defaultValue: 5000\n  }\n];\n\nconst bondingModes = [\n  {\n    value: \"main-backup\",\n    label: \"Main/Backup - Failover to backup when primary degrades\"\n  }\n];\n\nconst linkFields = [\n  {\n    name: \"address\",\n    label: \"Server Address\",\n    type: \"text\",\n    defaultValue: \"127.0.0.1\"\n  },\n  { name: \"port\", label: \"UDP Port\", type: \"number\", min: 1024, max: 65535 },\n  {\n    name: \"interface\",\n    label: \"Bind Interface (optional)\",\n    description: \"Network interface IP to bind to\",\n    type: \"text\"\n  }\n];\n\nconst failoverFields = [\n  {\n    name: \"rttThreshold\",\n    label: \"RTT Threshold (ms)\",\n    description: \"Failover when RTT exceeds this value\",\n    type: \"number\",\n    min: 100,\n    max: 5000,\n    defaultValue: 500\n  },\n  {\n    name: \"lossThreshold\",\n    label: \"Packet Loss Threshold\",\n    description: \"Failover when loss exceeds this ratio (0.0 - 1.0)\",\n    type: \"number\",\n    min: 0.01,\n    max: 0.5,\n    step: 0.01,\n    defaultValue: 0.1\n  },\n  {\n    name: \"healthCheckInterval\",\n    label: \"Health Check Interval (ms)\",\n    description: \"How often to check link health\",\n    type: \"number\",\n    min: 500,\n    max: 10000,\n    defaultValue: 1000\n  },\n  {\n    name: \"failbackDelay\",\n    label: \"Failback Delay (ms)\",\n    description: \"Wait time before switching back to primary after recovery\",\n    type: \"number\",\n    min: 5000,\n    max: 300000,\n    defaultValue: 30000\n  }\n];\n\n// Render a single form field based on its definition\nfunction FormField({ field, value, onChange }) { // eslint-disable-line no-unused-vars\n  const id = \"field-\" + field.name;\n\n  if (field.type === \"checkbox\") {\n    return (\n      <div className=\"form-group\" key={field.name}>\n        <label>\n          <input\n            id={id}\n            type=\"checkbox\"\n            checked={!!value}\n            onChange={(e) => onChange(field.name, e.target.checked)}\n          />{\" \"}\n          {field.label}\n        </label>\n        {field.description && (\n          <p className=\"field-description\">{field.description}</p>\n        )}\n      </div>\n    );\n  }\n\n  if (field.type === \"select\") {\n    return (\n      <div className=\"form-group\" key={field.name}>\n        <label htmlFor={id}>{field.label}</label>\n        <select\n          id={id}\n          className=\"form-control\"\n          value={value !== undefined && value !== null ? value : field.defaultValue || \"\"}\n          onChange={(e) => {\n            const val = e.target.value;\n            onChange(field.name, field.numeric ? Number(val) : val);\n          }}\n        >\n          {field.options.map((opt) => (\n            <option key={opt.value} value={opt.value}>\n              {opt.label}\n            </option>\n          ))}\n        </select>\n        {field.description && (\n          <p className=\"field-description\">{field.description}</p>\n        )}\n      </div>\n    );\n  }\n\n  // text, number, password\n  return (\n    <div className=\"form-group\" key={field.name}>\n      <label htmlFor={id}>{field.label}</label>\n      <input\n        id={id}\n        className=\"form-control\"\n        type={field.type}\n        value={value !== undefined && value !== null ? value : \"\"}\n        min={field.min}\n        max={field.max}\n        step={field.step}\n        minLength={field.minLength}\n        maxLength={field.maxLength}\n        onChange={(e) => {\n          const val = e.target.value;\n          onChange(field.name, field.type === \"number\" ? (val === \"\" ? \"\" : Number(val)) : val);\n        }}\n      />\n      {field.description && (\n        <p className=\"field-description\">{field.description}</p>\n      )}\n    </div>\n  );\n}\n\n// Render a group of fields that map to a nested object\nfunction FieldGroup({ title, description, fields, data, onChange }) { // eslint-disable-line no-unused-vars\n  return (\n    <fieldset className=\"field-group\">\n      <legend>{title}</legend>\n      {description && <p className=\"field-description\">{description}</p>}\n      {fields.map((field) => (\n        <FormField\n          key={field.name}\n          field={field}\n          value={data ? data[field.name] : undefined}\n          onChange={onChange}\n        />\n      ))}\n    </fieldset>\n  );\n}\n\n/**\n * Custom configuration panel for SignalK Data Connector plugin.\n * Fetches configuration from API and renders a dynamic form.\n */\nfunction PluginConfigurationPanel() {\n  const [formData, setFormData] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [saveStatus, setSaveStatus] = useState(null);\n\n  const isClientMode = formData.serverType !== \"server\";\n\n  // Fetch configuration from API on mount\n  useEffect(() => {\n    let cancelled = false;\n    fetch(API_BASE + \"/plugin-config\")\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\"Failed to load: \" + response.statusText);\n        }\n        return response.json();\n      })\n      .then((data) => {\n        if (!cancelled && data.success && data.configuration) {\n          setFormData(data.configuration);\n        }\n      })\n      .catch((err) => {\n        if (!cancelled) {\n          setError(err.message);\n        }\n      })\n      .finally(() => {\n        if (!cancelled) {\n          setLoading(false);\n        }\n      });\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n\n  // Update a top-level field\n  const handleFieldChange = useCallback((name, value) => {\n    setFormData((prev) => {\n      const next = Object.assign({}, prev);\n      next[name] = value;\n      return next;\n    });\n    setSaveStatus(null);\n  }, []);\n\n  // Update a nested field (e.g. congestionControl.enabled)\n  const handleNestedChange = useCallback((section, name, value) => {\n    setFormData((prev) => {\n      const next = Object.assign({}, prev);\n      next[section] = Object.assign({}, prev[section]);\n      next[section][name] = value;\n      return next;\n    });\n    setSaveStatus(null);\n  }, []);\n\n  // Update a doubly-nested field (e.g. bonding.primary.address)\n  const handleDeepNestedChange = useCallback((section, subsection, name, value) => {\n    setFormData((prev) => {\n      const next = Object.assign({}, prev);\n      next[section] = Object.assign({}, prev[section]);\n      next[section][subsection] = Object.assign({}, (prev[section] || {})[subsection]);\n      next[section][subsection][name] = value;\n      return next;\n    });\n    setSaveStatus(null);\n  }, []);\n\n  // Handle form submission\n  const handleSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n      setSaveStatus({ type: \"saving\", message: \"Saving...\" });\n\n      // Clean up client-only fields when in server mode\n      const cleanedData = Object.assign({}, formData);\n      if (cleanedData.serverType === \"server\") {\n        delete cleanedData.udpAddress;\n        delete cleanedData.helloMessageSender;\n        delete cleanedData.testAddress;\n        delete cleanedData.testPort;\n        delete cleanedData.pingIntervalTime;\n        delete cleanedData.congestionControl;\n        delete cleanedData.bonding;\n      }\n\n      fetch(API_BASE + \"/plugin-config\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(cleanedData)\n      })\n        .then((response) => {\n          return response.json().then((data) => {\n            if (response.ok && data.success) {\n              setSaveStatus({\n                type: \"success\",\n                message: data.message || \"Configuration saved. Plugin restarting...\"\n              });\n            } else {\n              throw new Error(data.error || \"Failed to save\");\n            }\n          });\n        })\n        .catch((err) => {\n          setSaveStatus({ type: \"error\", message: err.message });\n        });\n    },\n    [formData]\n  );\n\n  if (loading) {\n    return (\n      <div style={{ padding: \"20px\", textAlign: \"center\" }}>\n        Loading configuration...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{ padding: \"20px\", color: \"#dc3545\" }}>\n        <h4>Error Loading Configuration</h4>\n        <p>{error}</p>\n      </div>\n    );\n  }\n\n  const statusBg =\n    saveStatus && saveStatus.type === \"success\"\n      ? \"#d4edda\"\n      : saveStatus && saveStatus.type === \"error\"\n        ? \"#f8d7da\"\n        : \"#fff3cd\";\n  const statusColor =\n    saveStatus && saveStatus.type === \"success\"\n      ? \"#155724\"\n      : saveStatus && saveStatus.type === \"error\"\n        ? \"#721c24\"\n        : \"#856404\";\n  const statusBorder =\n    saveStatus && saveStatus.type === \"success\"\n      ? \"#c3e6cb\"\n      : saveStatus && saveStatus.type === \"error\"\n        ? \"#f5c6cb\"\n        : \"#ffeeba\";\n\n  return (\n    <div className=\"signalk-edge-link-config\">\n      {saveStatus && (\n        <div\n          style={{\n            padding: \"10px 15px\",\n            marginBottom: \"15px\",\n            borderRadius: \"4px\",\n            backgroundColor: statusBg,\n            color: statusColor,\n            border: \"1px solid \" + statusBorder\n          }}\n        >\n          {saveStatus.message}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <h3>SignalK Edge Link</h3>\n        <p className=\"field-description\">\n          Configure encrypted UDP data transmission between SignalK units\n        </p>\n\n        {baseFields.map((field) => (\n          <FormField\n            key={field.name}\n            field={field}\n            value={formData[field.name]}\n            onChange={handleFieldChange}\n          />\n        ))}\n\n        {isClientMode &&\n          clientFields.map((field) => (\n            <FormField\n              key={field.name}\n              field={field}\n              value={formData[field.name]}\n              onChange={handleFieldChange}\n            />\n          ))}\n\n        {isClientMode && (\n          <FieldGroup\n            title=\"Dynamic Congestion Control (v2 only)\"\n            description=\"Requires Protocol v2. AIMD algorithm to dynamically adjust send rate based on network conditions\"\n            fields={congestionFields}\n            data={formData.congestionControl}\n            onChange={(name, value) => {\n              handleNestedChange(\"congestionControl\", name, value);\n            }}\n          />\n        )}\n\n        {isClientMode && (\n          <fieldset className=\"field-group\">\n            <legend>Connection Bonding (v2 only)</legend>\n            <p className=\"field-description\">\n              Requires Protocol v2. Dual-link bonding with automatic failover\n              between primary and backup connections\n            </p>\n\n            <div className=\"form-group\">\n              <label>\n                <input\n                  type=\"checkbox\"\n                  checked={!!(formData.bonding && formData.bonding.enabled)}\n                  onChange={(e) => {\n                    handleNestedChange(\"bonding\", \"enabled\", e.target.checked);\n                  }}\n                />{\" \"}\n                Enable Connection Bonding\n              </label>\n              <p className=\"field-description\">\n                Enable dual-link bonding with automatic failover\n              </p>\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"field-bonding-mode\">Bonding Mode</label>\n              <select\n                id=\"field-bonding-mode\"\n                className=\"form-control\"\n                value={\n                  formData.bonding && formData.bonding.mode\n                    ? formData.bonding.mode\n                    : \"main-backup\"\n                }\n                onChange={(e) => {\n                  handleNestedChange(\"bonding\", \"mode\", e.target.value);\n                }}\n              >\n                {bondingModes.map((opt) => (\n                  <option key={opt.value} value={opt.value}>\n                    {opt.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <FieldGroup\n              title=\"Primary Link\"\n              description=\"Primary connection (e.g., LTE modem)\"\n              fields={linkFields.map((f) =>\n                Object.assign({}, f, {\n                  defaultValue: f.name === \"port\" ? 4446 : f.defaultValue\n                })\n              )}\n              data={formData.bonding ? formData.bonding.primary : undefined}\n              onChange={(name, value) => {\n                handleDeepNestedChange(\"bonding\", \"primary\", name, value);\n              }}\n            />\n\n            <FieldGroup\n              title=\"Backup Link\"\n              description=\"Backup connection (e.g., Starlink, satellite)\"\n              fields={linkFields.map((f) =>\n                Object.assign({}, f, {\n                  defaultValue: f.name === \"port\" ? 4447 : f.defaultValue\n                })\n              )}\n              data={formData.bonding ? formData.bonding.backup : undefined}\n              onChange={(name, value) => {\n                handleDeepNestedChange(\"bonding\", \"backup\", name, value);\n              }}\n            />\n\n            <FieldGroup\n              title=\"Failover Thresholds\"\n              description=\"Configure when failover is triggered\"\n              fields={failoverFields}\n              data={formData.bonding ? formData.bonding.failover : undefined}\n              onChange={(name, value) => {\n                handleDeepNestedChange(\"bonding\", \"failover\", name, value);\n              }}\n            />\n          </fieldset>\n        )}\n\n        <button type=\"submit\" className=\"btn btn-primary\">\n          Save Configuration\n        </button>\n      </form>\n\n      <style>{\"\\\n.signalk-edge-link-config {\\\n  width: 100%;\\\n}\\\n.signalk-edge-link-config h3 {\\\n  margin-top: 0;\\\n}\\\n.signalk-edge-link-config .form-group {\\\n  margin-bottom: 1rem;\\\n}\\\n.signalk-edge-link-config label {\\\n  font-weight: 600;\\\n  margin-bottom: 0.25rem;\\\n  display: block;\\\n}\\\n.signalk-edge-link-config .field-description {\\\n  font-size: 0.85rem;\\\n  color: #666;\\\n  margin-top: 0.25rem;\\\n  margin-bottom: 0.5rem;\\\n}\\\n.signalk-edge-link-config input,\\\n.signalk-edge-link-config select {\\\n  width: 100%;\\\n  padding: 0.5rem;\\\n  border: 1px solid #ccc;\\\n  border-radius: 4px;\\\n  font-size: 1rem;\\\n  box-sizing: border-box;\\\n}\\\n.signalk-edge-link-config input[type='checkbox'] {\\\n  width: auto;\\\n  margin-right: 0.5rem;\\\n}\\\n.signalk-edge-link-config .field-group {\\\n  border: 1px solid #ddd;\\\n  border-radius: 4px;\\\n  padding: 1rem;\\\n  margin-bottom: 1rem;\\\n}\\\n.signalk-edge-link-config .field-group legend {\\\n  font-weight: 600;\\\n  font-size: 1.05rem;\\\n  padding: 0 0.5rem;\\\n}\\\n.signalk-edge-link-config .btn-primary {\\\n  background-color: #007bff;\\\n  border-color: #007bff;\\\n  color: white;\\\n  padding: 0.5rem 1rem;\\\n  border-radius: 4px;\\\n  cursor: pointer;\\\n  font-size: 1rem;\\\n  margin-top: 1rem;\\\n}\\\n.signalk-edge-link-config .btn-primary:hover {\\\n  background-color: #0069d9;\\\n  border-color: #0062cc;\\\n}\\\n\"}</style>\n    </div>\n  );\n}\n\nexport default PluginConfigurationPanel;\n"],"names":["API_BASE","baseFields","name","label","description","type","options","value","defaultValue","min","max","minLength","maxLength","numeric","clientFields","step","congestionFields","bondingModes","linkFields","failoverFields","FormField","_ref","field","onChange","id","React","className","key","checked","e","target","htmlFor","val","Number","map","opt","FieldGroup","_ref2","title","fields","data","undefined","_useState2","_slicedToArray","useState","formData","setFormData","_useState4","loading","setLoading","_useState6","error","setError","_useState8","saveStatus","setSaveStatus","isClientMode","serverType","useEffect","cancelled","fetch","then","response","ok","Error","statusText","json","success","configuration","err","message","handleFieldChange","useCallback","prev","next","Object","assign","handleNestedChange","section","handleDeepNestedChange","subsection","handleSubmit","preventDefault","cleanedData","udpAddress","helloMessageSender","testAddress","testPort","pingIntervalTime","congestionControl","bonding","method","headers","body","JSON","stringify","style","padding","textAlign","color","statusBg","statusColor","statusBorder","marginBottom","borderRadius","backgroundColor","border","onSubmit","enabled","mode","f","primary","backup","failover"],"sourceRoot":""}